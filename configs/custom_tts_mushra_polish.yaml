#
# Advanced MUSHRA Configuration for TTS Evaluation (Polish version)
#
testname: Zaawansowana Ocena TTS MUSHRA
testId: tts_mushra_advanced_pl
language: 'pl'
bufferSize: 4096 # Increased buffer size for potentially larger audio files
stopOnErrors: true
showButtonPreviousPage: true
remoteService: service/write.php # Enable this and 'writeResults: true' on the finish page to save data

pages:
    # --- 1. Welcome Page ---
    - type: generic
      id: welcome
      name: Witaj w teście odsłuchowym
      content: |
        <p>W tym eksperymencie ocenisz jakość kilku próbek audio wygenerowanych przez systemy syntezy mowy (TTS).</p>
        <p>Prosimy o używanie <strong>wysokiej jakości słuchawek</strong> i upewnienie się, że znajdujesz się w <strong>cichym otoczeniu</strong>.</p>

    # --- 2. Consent Form ---
    - type: consent
      id: consent_page
      name: Formularz zgody
      mustConsent: true # User must agree to continue
      content: |
        <p>Za chwilę weźmiesz udział w teście odsłuchowym w celach badawczych.</p>
        <p>Twoje anonimowe odpowiedzi (w tym wiek i płeć zebrane na końcu eksperymentu) zostaną zebrane i wykorzystane do oceny jakości dźwięku.</p>
        <p>Klikając "Zgadzam się", potwierdzasz, że przeczytałeś/aś i zrozumiałeś/aś te informacje oraz wyrażasz zgodę na udział w badaniu.</p>

    # --- 3. Volume Adjustment Page ---
    - type: volume
      id: volume_adjustment
      name: Ustawienia głośności
      content: |
        <p>Zanim zaczniemy, dostosuj głośność swojego urządzenia odtwarzającego do <strong>komfortowego poziomu</strong>.</p>
        <p>Odtwórz poniższą próbkę audio i ustaw suwak głośności. To ustawienie będzie używane przez resztę testu.</p>
      stimulus: configs/resources/audio/mono_ref.wav # Using a standard file for volume setting
      defaultVolume: 0.5

    # --- 4. Training Section ---
    - type: generic
      id: training_info
      name: Sesja treningowa
      content: |
        <p>Twoim zadaniem jest ocena naturalności mowy w zaprezentowanych próbkach dźwiękowych. Oceniasz, jak bardzo dany głos zbliżony jest do mowy prawdziwego człowieka.</p>
        <p><strong>NA CO ZWRACAĆ GŁÓWNIE UWAGĘ:</strong><br>
        Intonacja i emocje: Czy głos brzmi żywo i "ludzko", czy płasko i monotonnie?<br>
        Jakość dźwięku: Czy słyszysz metaliczne pogłosy, szumy lub nagranie jest bardzo ciche?<br>
        Wymowa: Czy słowa są wymawiane poprawnie i wyraźnie?</p>
        <p><strong>CO JEST MNIEJ WAŻNE:</strong><br>
        Różnice w tempie i długości: Próbki mogą być dłuższe lub krótsze od Referencji. Nie obniżaj oceny za to, że model czyta wolniej lub robi pauzy w innych miejscach, o ile nie brzmią rażąco nienaturalnie.<br>
        Barwa głosu: Model może mieć nieco inną barwę niż Referencja. Jeśli nadal brzmi jak naturalny człowiek i jesteś w stanie wychwycić oryginalnego mówcę, oceń go wysoko.</p>
        <hr>
        <p>Kolejna strona to <strong>sesja treningowa</strong>, która pozwoli Ci zapoznać się z interfejsem. Będziesz w niej oceniać jakość nagrań względem jawnego <strong>Wzorca</strong>.</p>
        <p>Wśród testowanych próbek znajdą się:</p>
        <p>Nasz Model</p>
        <p>Model Porównawczy</p>
        <p>Kotwica (niska jakość)</p>
        <p>Ukryty Oryginał</p>
        <p>Użyj suwaków, aby ocenić podobieństwo do Wzorca. Wynik <strong>100</strong> oznacza brzmienie identyczne z oryginałem.</p>

    - type: mushra
      id: training_trial
      name: Trening MUSHRA
      content: To jest próba treningowa. Nazwy warunków (w tym Wzorca) są widoczne.
      showWaveform: true
      enableLooping: true
      # For training, we show the condition names and don't randomize them
      randomize: false
      showConditionNames: true
      reference: configs/resources/audio/mono_ref.wav
      createAnchor35: true # Automatically create a low-quality anchor for training
      stimuli:
        "Synteza 1": configs/resources/audio/mono_c1.wav
        "Synteza 2": configs/resources/audio/mono_c2.wav

    # --- 5. Start of the Actual Test ---
    - type: generic
      id: test_start_info
      name: Test wkrótce się rozpocznie
      content: <p>Trening został zakończony. Teraz rozpocznie się właściwy test. Powodzenia!</p>

    # --- 6. TTS MUSHRA Trials ---
    # You can copy and paste this block for each sentence/sample you want to test.

    # PASTE RESULT FROM ./generate_trials.sh

    # --- 7. Finish Page with Questionnaire ---
    - type: finish
      id: finish
      name: Dziękujemy!
      content: Dziękujemy za udział w tym teście odsłuchowym!
      showResults: false # Hides the detailed results from the participant
      writeResults: true
      questionnaire:
          - type: select
            label: Proszę wybrać swoją płeć
            name: gender
            options:
              - Mężczyzna
              - Kobieta
            optional: false
          - type: number
            label: Proszę podać swój wiek
            name: age
            optional: true
            min: 1
            max: 100